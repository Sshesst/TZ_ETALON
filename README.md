# Отель API

API для управления бронированием номеров в отеле.

## Установка и настройка

1. Убедитесь, что у вас установлен Node.js (https://nodejs.org) и PostgreSQL (https://www.postgresql.org).
2. Склонируйте репозиторий или скачайте код.
3. В корневой директории проекта выполните команду `npm install`, чтобы установить зависимости.

## Настройка базы данных

1. Создайте базу данных PostgreSQL для проекта.
2. Ипсользуйте файл hotel.sql как дамп базы данных или измените файл .env

## Запуск сервера

1. В корневой директории проекта выполните команду `npm start`, чтобы запустить сервер.
2. Сервер будет запущен на порту 3000. Вы можете изменить порт в файле `index.js`, если это необходимо.

## Использование API

### Получение списка номеров в отеле

**GET check/rooms**

Получает список всех номеров в отеле.

### Получение списка свободных номеров в отеле

**GET check/available**

Получает список свободных номеров в отеле на определенный период времени.

- Параметры запроса:
    - `startBook`: начальная дата бронирования (формат: ГГГГ-ММ-ДД)
    - `endBook`: конечная дата бронирования (формат: ГГГГ-ММ-ДД)

### Создание брони номера в отеле

**POST booking/create**

Создает бронь номера в отеле на определенный срок.

- Параметры запроса:
    - `startDate`: начальная дата бронирования (формат: ГГГГ-ММ-ДД)
    - `endDate`: конечная дата бронирования (формат: ГГГГ-ММ-ДД)
    - `RoomId`: идентификатор номера
    - `ClientId`: идентификатор клиента

### Отмена брони номера в отеле

**DELETE booking/delete/:bookingId**

Отменяет бронь номера в отеле.

- Параметры запроса:
    - `bookingId`: идентификатор брони

## Middlewares

### Проверка пересечения бронирований

`checkBookingMiddleware` - проверяет, что два клиента не могут одновременно забронировать один и тот же номер в отеле на пересекающиеся периоды.

### Проверка VIP-статуса клиента

`checkClientStatusMiddleware` - запрашивает удаленный API-сервер для проверки VIP-статуса клиента и обновляет информацию о клиенте в базе данных.